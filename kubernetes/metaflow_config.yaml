# metaflow_config.yaml
METAFLOW_PROFILE: kubernetes

# Use Kubernetes for Metaflow steps instead of local subprocesses
METAFLOW_DEFAULT_ENVIRONMENT: kubernetes
METAFLOW_DEFAULT_RUNNER: kubernetes
METAFLOW_KUBERNETES_NAMESPACE: default  # or "pixie", if that's your namespace

# Use local metadata service (or S3/AWS if you prefer)
METAFLOW_DATASTORE_SYSROOT_LOCAL: /metaflow_data
METAFLOW_DATATOOLS_SYSROOT_S3: s3://your-bucket/metaflow  # optional

# Each step runs as a separate short-lived pod
METAFLOW_KUBERNETES_SERVICE_ACCOUNT: metaflow-runner
METAFLOW_KUBERNETES_JOB_TIMEOUT_SECONDS: 3600

# Control image & resources for Metaflow step pods
METAFLOW_KUBERNETES_IMAGE: "python:3.13-slim"  # or your custom image
METAFLOW_KUBERNETES_MEMORY_LIMIT: "1Gi"
METAFLOW_KUBERNETES_CPU_LIMIT: "1"
METAFLOW_KUBERNETES_MEMORY_REQUEST: "512Mi"
METAFLOW_KUBERNETES_CPU_REQUEST: "0.5"

# Optional (for debugging)
METAFLOW_KUBERNETES_PULL_POLICY: IfNotPresent
METAFLOW_DEBUG_SUBCOMMAND: 1
